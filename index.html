<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Object Prototypes | COMP1073 Client-Side JavaScript</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="css/normalize.css" rel="stylesheet" />
	<link href="css/styles.css" rel="stylesheet" />
</head>

<body>
	<!-- STEP 1: Build out a HEADER and a SECTION element -->
	<header>
		</header>
		<section>

		</section>
	</header>

	<script>
		/* STEP 2: Bind the HEADER and the SECTION elements above to variables */
    var header = document.querySelector("header");
	var header = document.querySelector("section");
		/* STEP 3: Store the URL of a JSON file in a variable */
    var requestURL = 'https://github.com/NishthaPatel06/lab10/blob/main/js/i-scream.json';
		/* STEP 4: Create a new XHR object */
    var request = new XMLHttpRequest();
		/* STEP 5: Open a new request using the request() method */
    request.open('GET', requestURL);
		/* STEP 6: Set JavaScript to accept JSON from the server */
    request.responseType = 'json';
		/* STEP 7: Send the request with the send() method */
    request.send();
		/* STEP 8: Add an event handler that listens for the onload event of the JSON file/object */
     request.onload = function(){

		 var isScreamInc = request.response;
		 console.log(isScreamInc);
		 populateHeader(isScreamInc);
		 topFlavors(isScreamInc);
	 }
		/* STEP 9: Build out the populateHeader() function */
    function populateHeader(jsonOb)
	{
		var headerH1 = document.createElement('h1');
		headerH1.textContent = 'CompamyName: ';
		header.appendChild(headerH1);

		var headerPar = document.createElement('p');
		headerPar.textContent = 'headOffice: ' +jsonOb['headOffice'] + ' Established: ' +jsonOb['Established'];
		header.appendChild(headerPar);

	}
		/* STEP 10a: Assemble the showTopFlavors() function */
        function topFlavors(jsonOb){

		
		// STEP 10b: Bind the JSON topFlavors object to a var
         var topFlavors = jsonOb['topFlavors'];
			// STEP 10c: Loop through the topFlavors object
            for(var i=0;i<topFlavors.length;i++){

			
		// STEP 10d: build HTML elements for the content
            var article = document.createElement('article');
            var h2 = document.createElement('h2');
			var image = document.createElement('img');
			var par1 = document.createElement('p1');
			var par2 = document.createElement('p2');
			var ingredients = document.createElement('ing');
			var list = document.createElement('li');
			

				// STEP 10e: Set the textContent property for each of the above elements (except the UL), based on the JSON content
            img.setAttribute('src','https://github.com/NishthaPatel06/lab10/tree/main/images'
			+ topFlavors[i].image);
			img.setAttribute('alt', topFlavors[i],name);
			h2.textContent = topFlavors[i].name;
			p1.textContent = 'calories: ' + topFlavors[i].calories;
			p2.textContent = 'Type: ' + topFlavors[i].type;
			ing.textContent = topFlavors[i].ingredients;
			for( var j=0;j<ingredients.length;j++)
			{
				var listitem = document.createElement('lit');
				listitem.textContent = ingredients[i];
				list.appendChild(listitem);
			}
		}
				// STEP 10f: Build a loop for the ingredients array in the JSON
				article.appendChild(img);
				article.appendChild(h2);
				article.appendChild(p1);
				article.appendChild(p2);
				article.appendChild(list);
				article.appendChild(article);

				// STEP 10g: Append each of the above HTML elements to the ARTICLE element

				// STEP 10h: Append each complete ARTICLE element to the SECTION element
		// This page inspired by and adapted from https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON
		}
		// A special thanks to https://openclipart.org/detail/285225/ice-cream-cones for the awesome ice cream cone illustrations
		</script>
	</body>
</html>
